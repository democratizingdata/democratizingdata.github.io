<!-- Site Header -->
<header class="site-header" role="banner">
    <!-- Main Navigation -->
    <nav class="main-navigation navbar navbar-expand-lg navbar-light" 
         id="main-navigation" 
         role="navigation" 
         aria-label="Main navigation">
        <div class="container-fluid">
            
            <!-- Site Logo -->
            <a class="navbar-brand site-logo" 
               href="{{ site.baseurl }}/" 
               aria-label="Democratizing Data - Home">
                <img class="portal-logo" 
                     src="{{ site.baseurl }}/assets/img/org_logos/dd-logo.webp" 
                     alt="Democratizing Data"
                     crossorigin="anonymous">
            </a>

            <!-- Mobile menu toggle button -->
            <button class="navbar-toggler mobile-menu-toggle" 
                    type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#navbar-collapse"
                    aria-controls="navbar-collapse" 
                    aria-expanded="false" 
                    aria-label="Toggle navigation menu">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Collapsible Navigation Menu -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="navbar-nav main-nav ml-auto" role="menubar">
                    
                    <!-- Our Tools Section -->
                    <li class="nav-item dropdown" role="none">
                        <a href="{{ site.baseurl }}/tools/" 
                           class="nav-link dropdown-toggle" 
                           id="tools-dropdown"
                           role="menuitem"
                           aria-haspopup="true" 
                           aria-expanded="false"
                           data-bs-toggle="dropdown">
                            Our Tools
                        </a>
                        <div class="dropdown-menu" 
                             role="menu" 
                             aria-labelledby="tools-dropdown">
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/tools/dashboard/usda-landing/"
                               role="menuitem">
                                USDA Dashboard
                            </a>
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/tools/dashboard/workforce-landing/"
                               role="menuitem">
                                Workforce & Skills Dashboard
                            </a>
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/tools/national-data-platform/"
                               role="menuitem">
                                National Data Platform
                            </a>
                            <a class="dropdown-item" 
                               href="https://github.com/DemocratizingData"
                               target="_blank"
                               rel="noopener"
                               role="menuitem">
                                Github Repository
                                <span class="external-link-icon" aria-hidden="true"></span>
                            </a>
                        </div>
                    </li>

                    <!-- Events Section -->
                    <li class="nav-item" role="none">
                        <a class="nav-link" 
                           href="{{ site.baseurl }}/events/"
                           role="menuitem">
                            Events
                        </a>
                    </li>

                    <!-- Resources Section -->
                    <li class="nav-item dropdown" role="none">
                        <a href="{{ site.baseurl }}/resources/" 
                           class="nav-link dropdown-toggle" 
                           id="resources-dropdown"
                           role="menuitem"
                           aria-haspopup="true" 
                           aria-expanded="false"
                           data-bs-toggle="dropdown">
                            Resources
                        </a>
                        <div class="dropdown-menu" 
                             role="menu" 
                             aria-labelledby="resources-dropdown">
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/resources/technical-report/"
                               role="menuitem">
                                Technical Report
                            </a>
                            <a class="dropdown-item" 
                               href="https://www.kaggle.com/c/coleridgeinitiative-show-us-the-data"
                               target="_blank"
                               rel="noopener"
                               role="menuitem">
                                Code Competition
                                <span class="external-link-icon" aria-hidden="true"></span>
                            </a>
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/resources/additional-resources/"
                               role="menuitem">
                                Additional Resources
                            </a>
                        </div>
                    </li>

                    <!-- About Section -->
                    <li class="nav-item dropdown" role="none">
                        <a href="{{ site.baseurl }}/about/" 
                           class="nav-link dropdown-toggle" 
                           id="about-dropdown"
                           role="menuitem"
                           aria-haspopup="true" 
                           aria-expanded="false"
                           data-bs-toggle="dropdown">
                            About
                        </a>
                        <div class="dropdown-menu" 
                             role="menu" 
                             aria-labelledby="about-dropdown">
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/about/overview/"
                               role="menuitem">
                                Overview
                            </a>
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/about/our-approach/"
                               role="menuitem">
                                Our Approach
                            </a>
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/about/team/"
                               role="menuitem">
                                Our Team & Partners
                            </a>
                            <a class="dropdown-item" 
                               href="{{ site.baseurl }}/about/contact-us/"
                               role="menuitem">
                                Contact Us
                            </a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<!-- Enhanced Navigation JavaScript -->
<script type="module">
    import findLinksAndSetTargets from '{{ site.baseurl }}/assets/js/modules/setTargetForExternalLinks.js';
    
    // Initialize external link targets
    findLinksAndSetTargets();
    
    // Enhanced dropdown accessibility
    document.addEventListener('DOMContentLoaded', function() {
        const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
        
        dropdownToggles.forEach(toggle => {
            toggle.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });
    });
</script>
